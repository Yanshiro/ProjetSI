(function(e){function t(t){for(var n,i,l=t[0],s=t[1],c=t[2],d=0,f=[];d<l.length;d++)i=l[d],r[i]&&f.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"07a4":function(e,t,a){"use strict";var n=a("2b0e"),r=a("2f62");n["a"].use(r["a"]);var o={lodding:!1,data:[]},i={changeLodding:function(e,t){e.lodding=t},addData:function(e,t){e.data.push(t)},setData:function(e,t){e.data=t},removeData:function(e,t){e.data.splice(e.data.indexOf(t),1)}},l={lodding:function(e){return e.lodding},data:function(e){return e.data}};t["a"]=new r["a"].Store({state:o,mutations:i,getters:l,strict:!0})},1:function(e,t){},"1d32":function(e,t,a){"use strict";var n=a("27ff"),r=a.n(n);r.a},"27ff":function(e,t,a){},"3dfd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark",staticStyle:{"margin-bottom":"2em"}},[a("div",{staticClass:"collapse navbar-collapse"},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"Listetable"}}},[e._v("Liste des tables")])],1)]),a("form",{staticClass:"form-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.rechercheTable,expression:"rechercheTable"}],staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Recherche","aria-label":"Search"},domProps:{value:e.rechercheTable},on:{input:function(t){t.target.composing||(e.rechercheTable=t.target.value)}}}),a("router-link",{staticClass:"btn btn-outline-info my-2 my-sm-0",attrs:{tag:"button",to:{name:"infoTable",params:{table:e.rechercheTable}}},nativeOn:{click:function(t){e.resetRecherche()}}},[e._v("Rechercher une table")])],1)])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("router-view")],1)])])},r=[],o={name:"app",data:function(){return{rechercheTable:""}},components:{},methods:{resetRecherche:function(){this.rechercheTable=""}}},i=o,l=a("2877"),s=Object(l["a"])(i,n,r,!1,null,null,null);t["default"]=s.exports},"56d7":function(e,t,a){"use strict";a.r(t);a("4917"),a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=a("9f7b"),o=(a("f9e3"),a("2dd8"),a("8c4f")),i=a("28dd"),l=a("bc3a"),s=a.n(l),c=a("1881"),u=a.n(c);n["a"].config.productionTip=!1,n["a"].use(r["a"]),n["a"].use(i["a"]),n["a"].use(o["a"]),n["a"].use(u.a),n["a"].$http=s.a;var d=new o["a"]({mode:"history",routes:[{path:"/",component:a("cfd0").default,name:"Listetable"},{path:"/info-table-:table",component:a("d49b").default,name:"infoTable"},{path:"*",redirect:"/"}]});n["a"].prototype.$urlApi="http://127.0.0.1/Projetsi/",n["a"].prototype.$getTypeChampsInputBySQL=function(e){var t=/[int]/;return e.match(t)?"number":"text"},new n["a"]({router:d,render:function(e){return e(a("3dfd").default)}}).$mount("#app")},7742:function(e,t,a){},"7aac":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"MessageErreur"}},["undefined"!=typeof e.message&&""!=e.message?a("div",{staticClass:"alert alert-danger alert-dismissible fade show",attrs:{role:"alert"}},[a("strong",[e._v(e._s(e.message))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"},on:{click:function(t){e.suppertionMessage()}}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])},r=[],o={props:{message:String},methods:{suppertionMessage:function(){this.message="",this.$parent.messageErreur=""}}},i=o,l=(a("1d32"),a("2877")),s=Object(l["a"])(i,n,r,!1,null,null,null);t["a"]=s.exports},"9f7a":function(e,t,a){},a4a9:function(e,t,a){"use strict";var n=a("7742"),r=a.n(n);r.a},b090:function(e,t,a){},c29d:function(e,t,a){"use strict";var n=a("9f7a"),r=a.n(n);r.a},cfd0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12",attrs:{id:"Tables"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-group col-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.nameAddTable,expression:"nameAddTable"}],staticClass:"form-control col-12",attrs:{type:"text",placeholder:"Ajouter une table"},domProps:{value:e.nameAddTable},on:{input:function(t){t.target.composing||(e.nameAddTable=t.target.value)}}})]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.addTable()}}},[e._v("Ajouter une table")])])]),a("div",{staticClass:"col-12"},[a("MessageErreur",{attrs:{message:e.messageErreur}})],1),0==e.lodding?a("table",{staticClass:"table"},[e._m(0),a("tbody",e._l(e.tables,function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.id))]),a("td",[e._v(e._s(t.table))]),a("td",[a("router-link",{staticClass:"btn btn-info",attrs:{to:{name:"infoTable",params:{table:t.table}},tag:"button"}},[e._v("info table")]),a("button",{staticClass:"btn btn-warning",on:{click:function(a){e.deleteTable(t)}}},[e._v("Supprimer")])],1)])}),0)]):e._e(),e.lodding?a("div",{staticClass:"text-center"},[e._m(1)]):e._e()])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("td",[e._v("id")]),a("td",[e._v("nom de la table")]),a("td",[e._v("action")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])])}],o=a("cebc"),i=(a("cadf"),a("551c"),a("f751"),a("097d"),a("7aac")),l=a("07a4"),s=a("2f62"),c={store:l["a"],name:"Tables",components:{MessageErreur:i["a"]},computed:Object(o["a"])({},s["a"].mapGetters(["lodding"])),data:function(){return{controller:"TableController",tables:[],nameAddTable:"",messageErreur:""}},mounted:function(){var e=this;l["a"].commit("changeLodding",!0),this.$http.get(this.$urlApi+"?controller="+this.controller+"&f=getAllTable").then(function(t){e.tables=t.data,l["a"].commit("changeLodding",!1)}).catch(function(e){alert(e)})},methods:{addTable:function(){var e=new FormData;e.append("table",this.nameAddTable),this.appelAjax(this.$urlApi+"?controller="+this.controller+"&f=addTable",e)},appelAjax:function(e,t){var a=this;this.$http.post(e,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){a.tables.push(e.data)}).catch(function(e){a.messageErreur=e.body}).then(function(){a.nameAddTable=""})},deleteTable:function(e){var t=this,a=new FormData;a.append("table",e.table);var n=this.$urlApi+"?controller="+this.controller+"&f=deleteTable";this.$http.post(n,a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(){t.tables.splice(t.tables.indexOf(e),1)}).catch(function(e){t.messageErreur=e.body})}}},u=c,d=(a("c29d"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,null,null);t["default"]=f.exports},d49b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12",attrs:{id:"InfoTable"}},[a("div",{staticClass:"navInfoTable"},[a("h2",[e._v("Info sur la table : "+e._s(e.$route.params.table))]),a("MessageErreur",{attrs:{message:e.messageErreur}}),a("ul",{staticClass:"nav nav-pills mb-3",attrs:{id:"pills-tab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{class:e.structureActive,attrs:{href:"#"},on:{click:function(t){e.afficheStructureTable()}}},[e._v("Structure de la table")])]),a("li",{staticClass:"nav-item"},[a("a",{class:e.DonneesActive,attrs:{href:"#"},on:{click:function(t){e.afficheDonnees()}}},[e._v("Données de la table")])])])],1),e.lodding?a("div",{staticClass:"text-center"},[e._m(0)]):e._e(),e.structureActive==e.navActive?a("StructureTable",{attrs:{table:e.$route.params.table}}):e._e(),e.DonneesActive==e.navActive?a("DonneesTable"):e._e()],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spinner-grow",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])])}],o=a("cebc"),i=a("7aac"),l=a("07a4"),s=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"StructureTable"}},[a("modal",{attrs:{adaptive:!0,draggable:!0,height:"auto",scrollable:!0,name:e.nameModal}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 titreModal"},["undefined"!=typeof e.messageErreur&&""!=e.messageErreur?a("MessageErreur",{attrs:{message:e.messageErreur}}):e._e(),a("h2",[e._v("Ajouter une colonne")])],1),a("form",{staticClass:"col-12",attrs:{action:"",method:"post"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Nom de la colonne")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formAddColonne.colonne,expression:"formAddColonne.colonne"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nom de la colonne",name:"Column"},domProps:{value:e.formAddColonne.colonne},on:{input:function(t){t.target.composing||e.$set(e.formAddColonne,"colonne",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Type autorisé : varchar(255), int, datatype...")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.formAddColonne.type,expression:"formAddColonne.type"}],staticClass:"form-control",attrs:{name:"",id:""},on:{click:function(t){e.loadTable()},change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.formAddColonne,"type",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"int"}},[e._v("Int")]),a("option",{attrs:{value:"decimal"}},[e._v("decimal")]),a("option",{attrs:{value:"varchar(255)"}},[e._v("Chaine de caractere")]),a("option",{attrs:{value:"char"}},[e._v("Caractere")]),a("option",{attrs:{value:"date"}},[e._v("date")]),a("option",{attrs:{value:"lien"}},[e._v("Lien vers une autre table")])])]),"lien"==e.formAddColonne.type?a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.tableSelectJointure,expression:"tableSelectJointure"}],staticClass:"form-control",attrs:{name:"lien"},on:{click:function(t){e.loadColonne()},change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.tableSelectJointure=t.target.multiple?a:a[0]}}},e._l(e.tableJointure.filter(function(t){return t.table!=e.$route.params.table}),function(t,n){return a("option",{key:n,domProps:{value:t.table}},[e._v(e._s(t.table))])}),0)]):e._e(),"lien"==e.formAddColonne.type?a("div",{staticClass:"form-goup"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.colonneSelectJointure,expression:"colonneSelectJointure"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.colonneSelectJointure=t.target.multiple?a:a[0]}}},e._l(e.colonneJointure.filter(function(e){return"int(11)"==e.Type}),function(t,n){return a("option",{key:n,domProps:{value:t.Field}},[e._v(e._s(t.Field))])}),0)]):e._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Valeur par default")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.formAddColonne.default,expression:"formAddColonne.default"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Default",name:"Default"},domProps:{value:e.formAddColonne.default},on:{input:function(t){t.target.composing||e.$set(e.formAddColonne,"default",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Champs nullable")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.formAddColonne.nullable,expression:"formAddColonne.nullable"}],staticClass:"form-control",attrs:{name:"Nullable",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.formAddColonne,"nullable",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"NULL"}},[e._v("Autoriser")]),a("option",{attrs:{value:"NOT NULL"}},[e._v("Interdie")])])]),a("button",{staticClass:"btn btn-success",on:{click:function(t){t.preventDefault(),e.ValideForm()}}},[e._v("Valider")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"reset"},on:{click:function(t){e.hideModal()}}},[e._v("Annuler")])])])])]),a("table",{staticClass:"table center"},[e._m(0),a("tbody",e._l(e.structureTable,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.Field))]),a("td",[e._v(e._s(t.Type))]),a("td",[e._v(e._s(t.Null))]),a("td",[e._v(e._s(t.Default))]),a("td",[e._v(e._s(t.Key))]),a("td",[e._v(e._s(t.Extra))]),a("td",[a("button",{staticClass:"btn btn-info"},[e._v("Modification")]),a("button",{staticClass:"btn btn-danger",on:{click:function(a){e.suprimerChamps(t)}}},[e._v("Suppression")])])])}),0)]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-inline"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.addChamps()}}},[e._v("Ajouter un champs")])])])],1)},u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Nom de la colonne")]),a("th",[e._v("Type")]),a("th",[e._v("Nullable")]),a("th",[e._v("Default")]),a("th",[e._v("Key")]),a("th",[e._v("Extra")]),a("th",[e._v("Action")])])])}],d={store:l["a"],components:{MessageErreur:i["a"]},data:function(){return{controller:"TableController",structureTable:[],nameModal:"addChampsTable",formAddColonne:{colonne:"",type:"",nullable:"",default:""},tableJointure:[],colonneJointure:[],tableSelectJointure:"",colonneSelectJointure:"",messageErreur:""}},props:{table:String},mounted:function(){this.chargementStructureTable()},methods:{chargementStructureTable:function(){var e=this;l["a"].commit("changeLodding",!0),this.$http.get(this.$urlApi+"?controller="+this.controller+"&f=afficheStructure&table="+this.$route.params.table).then(function(t){e.structureTable=t.data}).catch(function(t){e.$parent.messageErreur=t.body}).then(function(){l["a"].commit("changeLodding",!1)})},addChamps:function(){this.$modal.show(this.nameModal)},suprimerChamps:function(e){var t=this,a=new FormData;a.append("table",this.$route.params.table),a.append("Column",e.Field);var n=this.$urlApi+"?controller="+this.controller+"&f=suprimerColonne";this.$http.post(n,a,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(a){"true"==a.body&&t.structureTable.splice(t.structureTable.indexOf(e),1)}).catch(function(e){t.$parent.messageErreur=e.body})},ValideForm:function(){var e=this,t=new FormData;t.append("table",this.$route.params.table),t.append("Column",this.formAddColonne.colonne),t.append("Type",this.formAddColonne.type),t.append("Nullable",this.formAddColonne.nullable),t.append("Default",this.formAddColonne.default),t.append("TableJointure",this.tableSelectJointure),t.append("ColonneJointure",this.colonneSelectJointure);var a=this.$urlApi+"?controller="+this.controller+"&f=addColonneInTable";this.$http.post(a,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){e.structureTable.push(t.data),e.hideModal(),e.messageErreur=""}).catch(function(t){e.messageErreur=t.body})},hideModal:function(){this.formAddColonne.colonne="",this.formAddColonne.type="",this.formAddColonne.nullable="",this.formAddColonne.default="",this.$modal.hide(this.nameModal)},loadTable:function(){var e=this;if("lien"==this.formAddColonne.type){this.tableJointure=[];var t=this.$urlApi+"?controller="+this.controller+"&f=getAllTable";this.$http.get(t).then(function(t){e.tableJointure=t.data}).catch(function(t){e.messageErreur=t.body})}},loadColonne:function(){var e=this;if(this.colonneJointure=[],"lien"==this.formAddColonne.type&&""!=this.tableSelectJointure){var t=this.$urlApi+"?controller="+this.controller+"&f=afficheStructure&table="+this.tableSelectJointure;this.$http.get(t).then(function(t){e.colonneJointure=t.data}).catch(function(t){e.messageErreur=t.body})}}}},f=d,p=a("2877"),h=Object(p["a"])(f,c,u,!1,null,null,null),m=h.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"DonnneesTable"}},[e.objectModif!={}?a("modal",{attrs:{adaptive:!0,draggable:!0,height:"auto",scrollable:!0,name:e.nameModal}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col 12"},[a("form",[e._l(e.structureTable,function(t,n){return a("div",{key:n,staticClass:"form-group"},[a("label",[e._v("\n                "+e._s(t.Field)+"\n                "),"NO"==t.Null?a("p",[e._v("(Champ obligatoire"+e._s(""==t.Extra?"":", "+t.Extra)+")")]):a("p",[e._v("(Champs pas obligatoire "+e._s(""==t.Extra?"jnlk":t.Extra)+")")])]),"checkbox"===e.$getTypeChampsInputBySQL(t.Type)&&"auto_increment"!=t.Extra&&"MUL"!=t.Key?a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{placeholder:t.Field,type:"checkbox"},domProps:{value:e.objectModif[t.Field],checked:Array.isArray(e.objectModif[t.Field])?e._i(e.objectModif[t.Field],e.objectModif[t.Field])>-1:e.objectModif[t.Field]},on:{change:function(a){var n=e.objectModif[t.Field],r=a.target,o=!!r.checked;if(Array.isArray(n)){var i=e.objectModif[t.Field],l=e._i(n,i);r.checked?l<0&&e.$set(e.objectModif,t.Field,n.concat([i])):l>-1&&e.$set(e.objectModif,t.Field,n.slice(0,l).concat(n.slice(l+1)))}else e.$set(e.objectModif,t.Field,o)}}}):"radio"===e.$getTypeChampsInputBySQL(t.Type)&&"auto_increment"!=t.Extra&&"MUL"!=t.Key?a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{placeholder:t.Field,type:"radio"},domProps:{value:e.objectModif[t.Field],checked:e._q(e.objectModif[t.Field],e.objectModif[t.Field])},on:{change:function(a){e.$set(e.objectModif,t.Field,e.objectModif[t.Field])}}}):"auto_increment"!=t.Extra&&"MUL"!=t.Key?a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{placeholder:t.Field,type:e.$getTypeChampsInputBySQL(t.Type)},domProps:{value:e.objectModif[t.Field],value:e.objectModif[t.Field]},on:{input:function(a){a.target.composing||e.$set(e.objectModif,t.Field,a.target.value)}}}):"MUL"==t.Key&&e.arrayCleEtranger.length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",on:{change:function(a){var n=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.objectModif,t.Field,a.target.multiple?n:n[0])}}},[a("option",[e._v("Choisir une valeur")]),e._l(e.chargeDataClefEtranger(t),function(t,n){return a("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t))])})],2):"checkbox"===e.$getTypeChampsInputBySQL(t.Type)?a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{disabled:"",name:"",placeholder:t.Field,type:"checkbox"},domProps:{value:e.objectModif[t.Field],checked:Array.isArray(e.objectModif[t.Field])?e._i(e.objectModif[t.Field],e.objectModif[t.Field])>-1:e.objectModif[t.Field]},on:{change:function(a){var n=e.objectModif[t.Field],r=a.target,o=!!r.checked;if(Array.isArray(n)){var i=e.objectModif[t.Field],l=e._i(n,i);r.checked?l<0&&e.$set(e.objectModif,t.Field,n.concat([i])):l>-1&&e.$set(e.objectModif,t.Field,n.slice(0,l).concat(n.slice(l+1)))}else e.$set(e.objectModif,t.Field,o)}}}):"radio"===e.$getTypeChampsInputBySQL(t.Type)?a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{disabled:"",name:"",placeholder:t.Field,type:"radio"},domProps:{value:e.objectModif[t.Field],checked:e._q(e.objectModif[t.Field],e.objectModif[t.Field])},on:{change:function(a){e.$set(e.objectModif,t.Field,e.objectModif[t.Field])}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.objectModif[t.Field],expression:"objectModif[col.Field]"}],staticClass:"form-control",attrs:{disabled:"",name:"",placeholder:t.Field,type:e.$getTypeChampsInputBySQL(t.Type)},domProps:{value:e.objectModif[t.Field],value:e.objectModif[t.Field]},on:{input:function(a){a.target.composing||e.$set(e.objectModif,t.Field,a.target.value)}}})])}),a("button",{staticClass:"btn btn-success",on:{click:function(t){t.preventDefault(),e.modifDonnes(e.objectModif)}}},[e._v("Modifier la donnée")]),a("button",{staticClass:"btn btn-danger",on:{click:function(t){t.preventDefault(),e.hideModal()}}},[e._v("Fermer la modal")])],2)])])])]):e._e(),1==e.finChargementCleEtranger?a("table",{staticClass:"table center"},[a("thead",[a("tr",[e._l(e.structureTable,function(t,n){return a("th",{key:n},[e._v(e._s(t.Field))])}),a("th",[e._v("Action")])],2)]),a("tbody",e._l(e.data,function(t,n){return a("tr",{key:n},[e._l(e.structureTable,function(n,r){return a("td",{key:r},["MUL"!=n.Key?a("p",[e._v(e._s(t[n.Field]))]):a("p",[e._v(e._s(e.chargeDataEtranger(n.Field,t[n.Field])))])])}),a("td",[a("button",{staticClass:"btn btn-info",on:{click:function(a){e.modification(t)}}},[e._v("Modification")]),a("button",{staticClass:"btn btn-danger",on:{click:function(a){e.suppressionData(t)}}},[e._v("Suppression")])])],2)}),0)]):e._e(),a("button",{staticClass:"btn btn-success",on:{click:function(t){e.exportCSV(e.data)}}},[e._v("Export csv")]),1==e.finChargementCleEtranger?a("AjoutDonnees",{attrs:{arrayCleEtranger:e.arrayCleEtranger,structureTable:e.structureTable}}):e._e()],1)},v=[],g=a("db0c"),C=a.n(g),_=a("a4bb"),y=a.n(_),T=a("75fc"),A=(a("a481"),a("f499")),F=a.n(A),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"AjoutDonnees"}},[a("h2",[e._v("Ajouter des données dans la table "+e._s(this.$route.params.table))]),a("hr"),a("h3",[e._v("Ajout des données avec un fichier csv")]),e.structureTable.length>0?a("AddDonneesCSV",{attrs:{structureTable:e.structureTable}}):e._e(),a("hr"),a("h3",[e._v("Ajout des données manuellement")]),a("div",{staticClass:"form-group DivNbDataAouter"},[a("label",{attrs:{for:"nbDataAouter"}},[e._v("Nombre de données a ajouter")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nbLigne,expression:"nbLigne"}],staticClass:"form-control",attrs:{id:"nbDataAouter",input:e.addForm(e.nbLigne),type:"number"},domProps:{value:e.nbLigne},on:{input:function(t){t.target.composing||(e.nbLigne=t.target.value)}}})]),e._l(e.arrayForm,function(t,n){return a("form",{key:n,attrs:{action:""}},[a("h1",[e._v("Ajout données "+e._s(n+1))]),a("hr"),e._l(e.structureTable,function(t,r){return a("div",{key:r,staticClass:"form-group"},[a("label",[e._v("\n        "+e._s(t.Field)+"\n        "),"NO"==t.Null?a("p",[e._v("(Champ obligatoire"+e._s(""==t.Extra?"":", "+t.Extra)+")")]):a("p",[e._v("(Champs pas obligatoire "+e._s(""==t.Extra?"jnlk":t.Extra)+")")])]),"auto_increment"!=t.Extra&&"MUL"!=t.Key?a("input",{staticClass:"form-control",attrs:{type:e.$getTypeChampsInputBySQL(t.Type),placeholder:t.Field},on:{input:function(a){e.loadDataInForm(n,t.Field,a.target.value)}}}):"MUL"==t.Key?a("select",{staticClass:"form-control",on:{input:function(a){e.loadDataInForm(n,t.Field,a.target.value)}}},[a("option",[e._v("Choisir une valeur")]),e._l(e.chargeDataClefEtranger(t),function(t,n){return a("option",{key:n,domProps:{value:t.id}},[e._v(e._s(t))])})],2):a("input",{staticClass:"form-control",attrs:{disabled:"",type:e.$getTypeChampsInputBySQL(t.Type),name:"",placeholder:t.Field}})])}),a("button",{staticClass:"btn btn-success",on:{click:function(t){t.preventDefault(),e.AjouteUneDonneesBdd(e.arrayForm[n])}}},[e._v("Ajouter les données")])],2)})],2)},k=[],M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"AddDonneesCSV"}},[a("div",{staticClass:"importExel"},[a("VueCsvImport",{attrs:{inputClass:"fiche de contrôle de formulaire",loadBtnText:"Soumettre","map-fields":e.structureTable.filter(function(e){return"auto_increment"!=e.Extra&&"MUL"!=e.Type}).map(function(e){return e.Field})},on:{input:function(t){e.loadDataCSV(e.parseCsv)}},model:{value:e.parseCsv,callback:function(t){e.parseCsv=t},expression:"parseCsv"}}),e.filterParse.length>0?a("div",[a("button",{staticClass:"btn btn-primary",on:{click:function(t){e.loadDataCSV(e.parseCsv)}}},[e._v("Réinitialiser")]),a("button",{staticClass:"btn btn-success",on:{click:function(t){e.AddData()}}},[e._v("Ajouter dans la base de données")]),a("button",{staticClass:"btn btn-danger",on:{click:function(t){e.annulerImport()}}},[e._v("Annuler l'import csv")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"barre de recherche"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),a("small",{staticClass:"text-muted",attrs:{id:"helpId"}},[e._v("Ce champ permet juste de vérifier les résultats de l'import")])]),a("hr"),e.doublon?a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",value:"",id:"defaultCheck2"},on:{click:function(t){e.deleteDoublon()}}}),a("label",{staticClass:"form-check-label",attrs:{for:"defaultCheck2"},on:{click:function(t){e.deleteDoublon()}}},[e._v("Enlever les doublons")])]):e._e(),a("h1",[e._v("Aperçu de l'import csv")]),a("small",[e._v("Resultat Total: "+e._s(e.nombreResultat())+" | Nombre de data selectionner pour l'enregistrement "+e._s(e.nbChecked))]),a("table",{staticClass:"table"},[a("thead",[e._l(e.structureTable.filter(function(e){return"auto_increment"!=e.Extra&&"MUL"!=e.Type}),function(t,n){return a("th",{key:n},[a("div",{staticClass:"box",staticStyle:{display:"block"}},[a("p",[e._v("\n                "+e._s(t.Field)+"\n                "),a("a",{attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),e.changeFleche(t)}}},[1==t.trie?a("svg",{attrs:{id:"i-caret-bottom",viewBox:"0 0 32 32",width:"22",height:"22",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[a("path",{attrs:{d:"M30 10 L16 26 2 10 Z"}})]):a("svg",{attrs:{id:"i-caret-top",viewBox:"0 0 32 32",width:"22",height:"22",fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}},[a("path",{attrs:{d:"M30 22 L16 6 2 22 Z"}})])])])])])}),a("th",[e._v("\n            Ajout dans la database\n            "),a("input",{attrs:{type:"checkbox"},on:{input:function(t){e.changeCheckedForAllData()}}})])],2),a("tbody",e._l(e.filterDataCSV,function(t,n){return a("tr",{key:n},e._l(t,function(n,r,o){return a("td",{key:o},["checked"!=r?a("p",[e._v(e._s(n))]):a("input",{attrs:{type:"checkbox"},domProps:{checked:1==n?"checked":""},on:{input:function(a){e.changeChecked(t)}}})])}),0)}),0)])]):e._e()],1)])},$=[],x=(a("ac6a"),a("20d6"),a("55dd"),a("386d"),a("6762"),a("2fdb"),a("781e")),D=a.n(x),E={props:{structureTable:Array},mounted:function(){this.structureTable.filter(function(e){return e["trie"]=!1})},data:function(){return{nbChecked:0,checked:!1,search:"",parseCsv:[],filterParse:[],tabNonTrie:[],doublon:!0,controller:"TableController"}},computed:Object(o["a"])({},s["a"].mapGetters(["data"]),{filterDataCSV:{get:function(){var e,t=this;return this.filterParse.filter(function(a){for(var n in e=y()(a),e)try{if(a[e[n]].toLowerCase().includes(t.search.toLowerCase()))return!0}catch(r){return!1}return!1})}}}),components:{VueCsvImport:D.a},methods:{loadDataCSV:function(e){for(var t in e=this.videLigneVideFichierCSV(e),this.filterParse=e,this.doublon=!0,this.filterParse)this.filterParse[t]["checked"]=!1},changeChecked:function(e){this.filterParse[this.filterParse.indexOf(e)].checked=1!=this.filterParse[this.filterParse.indexOf(e)].checked,this.calculNbChecked()},changeCheckedForAllData:function(){var e=this;this.checked=1!=this.checked,this.filterDataCSV.filter(function(t){return t.checked=e.checked}),this.$forceUpdate(),this.calculNbChecked()},initParameter:function(){this.parameter},nombreResultat:function(){return this.filterDataCSV.length},calculNbChecked:function(){this.nbChecked=this.filterParse.filter(function(e){return 1==e.checked}).length},changeFleche:function(e){e.trie=1!=e.trie,1==e.trie?(this.tabNonTrie=this.filterParse,this.filterParse=this.filterParse.filter(function(t){return t[e.Field]}).sort(function(t,a){return t[e.Field]<a[e.Field]?-1:t[e.Field]==a[e.Field]?0:1})):this.filterParse=this.tabNonTrie},videLigneVideFichierCSV:function(e){return e.filter(function(e){for(var t in e)try{if(e[t].length>0)return!0}catch(a){return!1}return!1})},deleteDoublon:function(){var e=this,t=this.filterParse.filter(function(t,a){return a===e.filterParse.findIndex(function(e){return F()(e).toLowerCase()===F()(t).toLowerCase()})});this.filterParse=t,this.doublon=!1,this.tabNonTrie=this.tabNonTrie.filter(function(t,a){return a===e.tabNonTrie.findIndex(function(e){return F()(e).toLowerCase()===F()(t).toLowerCase()})})},AddData:function(){var e=this,t=this.filterParse.filter(function(e){return 1==e.checked}).slice();t.forEach(function(e){delete e.checked});var a={};a["table"]=this.$route.params.table,a["data"]=t;var n=new FormData;n.append("data",F()(a)),this.$http.post(this.$urlApi+"?controller="+this.controller+"&f=addData",n,"json").then(function(t){var a=t.data;l["a"].commit("setData",a),e.annulerImport()}).catch(function(t){e.$parent.$parent.messageErreur=t.body})},annulerImport:function(){this.filterParse=[],this.parseCsv=[]}}},w=E,S=Object(p["a"])(w,M,$,!1,null,null,null),L=S.exports,P={store:l["a"],props:{structureTable:Array,arrayCleEtranger:Array},data:function(){return{nbLigne:1,arrayForm:[],arrayTableValeurColonne:[],controller:"TableController"}},components:{AddDonneesCSV:L},computed:Object(o["a"])({},s["a"].mapGetters(["data"])),methods:{addForm:function(e){if(""!=e){for(var t=this.arrayForm.length;t<e;t++){this.arrayForm.push({});var a={};for(var n in this.structureTable)a[this.structureTable[n].Field]="";this.arrayForm[t]=a}for(var r=this.arrayForm.length;r>e;r--)this.arrayForm.splice(r-1,1)}},loadDataInForm:function(e,t,a){var n=this.arrayForm[e];n[t]=a,this.arrayForm[e]=n},chargeDataClefEtranger:function(e){return this.arrayCleEtranger.filter(function(t){return t.colonne.Champ1==e.Field})[0].value},AjouteUneDonneesBdd:function(e){var t={},a={};t["table"]=this.$route.params.table;var n=[];for(var r in e)a[r]=e[r];n.push(a),t["data"]=n,this.AjouteDonneAjax(t)},AjouteDonneAjax:function(e){var t=this,a=new FormData;a.append("data",F()(e)),this.$http.post(this.$urlApi+"?controller="+this.controller+"&f=addData",a,"json").then(function(a){t.arrayForm.splice(t.arrayForm.indexOf(e),1);var n=a.data;l["a"].commit("setData",n),t.nbLigne--}).catch(function(e){t.$parent.messageErreur=e.body})}}},N=P,O=(a("a4a9"),Object(p["a"])(N,j,k,!1,null,null,null)),I=O.exports,J={store:l["a"],data:function(){return{structureTable:[],arrayCleEtranger:[],controller:"TableController",finChargementCleEtranger:!1,nameModal:"ModificationModal",objectModif:{}}},computed:Object(o["a"])({},s["a"].mapGetters(["data"])),components:{AjoutDonnees:I},mounted:function(){this.chargementDonneesTable(),this.chargementStructureTable()},methods:{chargementLienTable:function(){var e=this,t=this.structureTable.filter(function(e){return"MUL"==e.Key}),a=this.$urlApi+"?controller="+this.controller+"&f=chargeValueEtranger",n=new FormData;n.append("table",this.$route.params.table),n.append("colonnes",F()(t)),this.$http.post(a,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){e.arrayCleEtranger=t.data,e.finChargementCleEtranger=!0}).catch(function(t){e.messageErreur=t.body})},chargementDonneesTable:function(){var e=this;l["a"].commit("changeLodding",!0),this.$http.get(this.$urlApi+"?controller="+this.controller+"&f=getDonnees&table="+this.$route.params.table).then(function(e){l["a"].commit("setData",e.data)}).catch(function(t){e.$parent.messageErreur=t.body}).then(function(){l["a"].commit("changeLodding",!1)})},chargementStructureTable:function(){var e=this;l["a"].commit("changeLodding",!0),this.$http.get(this.$urlApi+"?controller="+this.controller+"&f=afficheStructure&table="+this.$route.params.table).then(function(t){e.structureTable=t.data,e.chargementLienTable()}).catch(function(t){e.$parent.messageErreur=t.body}).then(function(){l["a"].commit("changeLodding",!1)})},suppressionData:function(e){var t=this,a=new FormData;a.append("id",e.id),a.append("table",this.$route.params.table),this.$http.post(this.$urlApi+"?controller="+this.controller+"&f=deletData",a).then(function(){l["a"].commit("removeData",e)}).catch(function(e){t.$parent.messageErreur=e.body})},chargeDataEtranger:function(e,t){var a=this.arrayCleEtranger.filter(function(t){return t.colonne.Champ1==e})[0],n=a.value.filter(function(e){return e[a.colonne.Champ2]==t});return n},modification:function(e){this.objectModif=e,this.$modal.show(this.nameModal)},modifDonnes:function(e){var t=this,a=new FormData;a.append("data",F()(e)),a.append("table",this.$route.params.table),this.$http.post(this.$urlApi+"?controller="+this.controller+"&f=updateData",a).then(function(e){l["a"].commit("setData",e.data)}).catch(function(e){t.$parent.messageErreur=e.body}).then(function(){t.hideModal()})},chargeDataClefEtranger:function(e){return this.arrayCleEtranger.filter(function(t){return t.colonne.Champ1==e.Field})[0].value},hideModal:function(){this.$modal.hide(this.nameModal),this.objectModif={}},exportCSV:function(e){var t="data:text/csv;charset=utf-8,";t+=[y()(e[0]).join(";")].concat(Object(T["a"])(e.map(function(e){return C()(e).join(";")}))).join("\n").replace(/(^\[)|(\]$)/gm,"");var a=encodeURI(t),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","export.csv"),n.click()}}},V=J,U=Object(p["a"])(V,b,v,!1,null,null,null),B=U.exports,K={store:l["a"],components:{MessageErreur:i["a"],StructureTable:m,DonneesTable:B},computed:Object(o["a"])({},s["a"].mapGetters(["lodding"])),data:function(){return{nameModal:"add_contenue_tab",navDesactive:"nav-link",navActive:"nav-link active",structureActive:"nav-link active",DonneesActive:"nav-link",messageErreur:""}},props:{structureTable:Object},methods:{afficheStructureTable:function(){this.DonneesActive=this.navDesactive,this.structureActive=this.navActive},afficheDonnees:function(){this.DonneesActive=this.navActive,this.structureActive=this.navDesactive}}},Q=K,R=(a("f3cf"),Object(p["a"])(Q,n,r,!1,null,null,null));t["default"]=R.exports},f3cf:function(e,t,a){"use strict";var n=a("b090"),r=a.n(n);r.a}});
//# sourceMappingURL=app.6185a5f2.js.map